/*
 * Script Detector v1.0
 * https://github.com/barongello/script-detector
 *
 * Copyright 2016 - Now Wagner Barongello
 * Released under MIT license
 */
window.ScriptDetector=window.ScriptDetector||{initialized:!1,shouldBlock:{localFiles:!1,allChromeExtensions:!1,chromeExtensionsIds:[],domains:[],filenames:[],regularExpressions:[]},timer:15e3,interval:null,initialize:function(){return this.initialized===!0?this:(this.shouldBlock={localFiles:!1,allChromeExtensions:!1,chromeExtensionsIds:[],domains:[],filenames:[],regularExpressions:[]},this.timer=15e3,this.interval=null,this.initialized=!0,this)},allowLocalFiles:function(){return this.initialized!==!0?this:(this.shouldBlock.localFiles=!1,this)},disallowLocalFiles:function(){return this.initialized!==!0?this:(this.shouldBlock.localFiles=!0,this)},allowAllChromeExtensions:function(){return this.initialized!==!0?this:(this.shouldBlock.allChromeExtensions=!1,this)},disallowAllChromeExtensions:function(){return this.initialized!==!0?this:(this.shouldBlock.allChromeExtensions=!0,this)},clearChromeExtensionsIds:function(){return this.initialized!==!0?this:(this.shouldBlock.chromeExtensionsIds=[],this)},setChromeExtensionsIds:function(i){if(this.initialized!==!0)return this;if("undefined"!=typeof i&&null!==i&&i.constructor===Array){this.shouldBlock.chromeExtensionsIds=[];for(var t in i)"undefined"!=typeof i[t]&&null!==i[t]&&i[t].constructor===String&&this.shouldBlock.chromeExtensionsIds.push(i[t])}return this},setDomains:function(i){if(this.initialized!==!0)return this;if("undefined"!=typeof i&&null!==i&&i.constructor===Array){this.shouldBlock.domains=[];for(var t in i)"undefined"!=typeof i[t]&&null!==i[t]&&i[t].constructor===String&&this.shouldBlock.domains.push(i[t])}return this},setFilenames:function(i){if(this.initialized!==!0)return this;if("undefined"!=typeof i&&null!==i&&i.constructor===Array){this.shouldBlock.filenames=[];for(var t in i)"undefined"!=typeof i[t]&&null!==i[t]&&i[t].constructor===String&&this.shouldBlock.filenames.push(i[t])}return this},setRegularExpressions:function(i){if(this.initialized!==!0)return this;if("undefined"!=typeof i&&null!==i&&i.constructor===Array){this.shouldBlock.regularExpressions=[];for(var t in i)"undefined"!=typeof i[t]&&null!==i[t]&&i[t].constructor===RegExp&&this.shouldBlock.regularExpressions.push(i[t])}return this},setTimer:function(i){return this.initialized!==!0?this:("undefined"!=typeof i&&null!==i&&i.constructor===Number&&Number.isInteger(i)===!0&&(this.timer=i,null!==this.interval&&(this.stopTimer(),this.timer>=0&&this.startTimer())),this)},stopTimer:function(){return this.initialized!==!0?this:(null!==this.interval&&(clearInterval(this.interval),this.interval=null),this)},startTimer:function(i,t){if(this.initialized!==!0)return this;if(("undefined"==typeof i||null!==i&&i.constructor!==Function)&&(i=null),("undefined"==typeof t||null!==t&&t.constructor!==Function)&&(t=null),this.timer>=0){var n=this;this.interval=setInterval(function(){n.doVerification(i,t)},this.timer)}return this},doVerification:function(i,t){if(this.initialized!==!0)return this;if("undefined"==typeof i&&"undefined"==typeof t)return this;if("undefined"!=typeof i&&null===i&&"undefined"!=typeof t&&null===t)return this;if("undefined"!=typeof i&&null!==i&&i.constructor!==Function&&"undefined"!=typeof t&&null!==t&&t.constructor!==Function)return this;var n=[],s=document.getElementsByTagName("script");for(var e in s){var o=s[e];if("undefined"!=typeof o.src&&null!==o.src&&o.src.constructor===String){var r=o.src;if(this.shouldBlock.localFiles!==!0||"file"!==r.split(":")[0]){var l=r.split("://"),u=2===l.length?l.shift():"";if(l=l[0].split("/"),"chrome-extension"===u){if(this.shouldBlock.allChromeExtensions===!0){n.push({origin:"BLOCK_ALL_CHROME_EXTENSIONS",name:l.length>0?l[0]:"UNKNOWN",src:r});continue}if(l[0].length>0){var h=this.shouldBlock.chromeExtensionsIds.indexOf(l[0]);if(h>-1){n.push({origin:"BLOCK_CHROME_EXTENSION_IDS",name:this.shouldBlock.chromeExtensionsIds[h],src:r});continue}}}if(u.length>0){var c=l[0].split(":")[0];if(c.length>0){var d=this.shouldBlock.domains.indexOf(c);if(d>-1){n.push({origin:"BLOCK_DOMAIN",name:this.shouldBlock.domains[d],src:r});continue}}}var a=l[l.length-1];if(a.length>0){var f=this.shouldBlock.filenames.indexOf(a);if(f>-1){n.push({origin:"BLOCK_FILENAME",name:this.shouldBlock.filenames[f],src:r});continue}}for(var e in this.shouldBlock.regularExpressions)if(this.shouldBlock.regularExpressions[e].test(r)===!0){n.push({origin:"BLOCK_REGULAR_EXPRESSION",name:this.shouldBlock.regularExpressions[e].toString(),src:r});break}}else n.push({origin:"BLOCK_LOCAL_FILES",src:r})}}return n.length>0?null!==i&&i.constructor===Function&&i(n):null!==t&&t.constructor===Function&&t(),this}},ScriptDetector.initialize();
