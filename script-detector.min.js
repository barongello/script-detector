/*
 * Script Detector v1.1
 * https://github.com/barongello/script-detector
 *
 * Copyright 2016 Wagner Barongello
 * Released under MIT license
 */
window.ScriptDetector=window.ScriptDetector||{initialized:!1,shouldBlock:{localFiles:!1,allChromeExtensions:!1,chromeExtensionsIds:[],domains:[],filenames:[],regularExpressions:[]},timer:15e3,interval:null,initialize:function(){return this.initialized===!0?this:(this.shouldBlock={localFiles:!1,allChromeExtensions:!1,chromeExtensionsIds:[],domains:[],filenames:[],regularExpressions:[]},this.timer=15e3,this.interval=null,this.initialized=!0,this)},allowLocalFiles:function(){return this.initialized!==!0?this:(this.shouldBlock.localFiles=!1,this)},disallowLocalFiles:function(){return this.initialized!==!0?this:(this.shouldBlock.localFiles=!0,this)},allowAllChromeExtensions:function(){return this.initialized!==!0?this:(this.shouldBlock.allChromeExtensions=!1,this)},disallowAllChromeExtensions:function(){return this.initialized!==!0?this:(this.shouldBlock.allChromeExtensions=!0,this)},clearChromeExtensionsIds:function(){return this.initialized!==!0?this:(this.shouldBlock.chromeExtensionsIds=[],this)},setChromeExtensionsIds:function(i){if(this.initialized!==!0)return this;if("undefined"==typeof i||null===i||i.constructor!==Array)return this;this.shouldBlock.chromeExtensionsIds=[];for(var t in i)"undefined"!=typeof i[t]&&null!==i[t]&&i[t].constructor===String&&this.shouldBlock.chromeExtensionsIds.push(i[t]);return this},clearDomains:function(){return this.initialized!==!0?this:(this.shouldBlock.domains=[],this)},setDomains:function(i){if(this.initialized!==!0)return this;if("undefined"==typeof i||null===i||i.constructor!==Array)return this;this.shouldBlock.domains=[];for(var t in i)"undefined"!=typeof i[t]&&null!==i[t]&&i[t].constructor===String&&this.shouldBlock.domains.push(i[t]);return this},clearFilenames:function(){return this.initialized!==!0?this:(this.shouldBlock.filenames=[],this)},setFilenames:function(i){if(this.initialized!==!0)return this;if("undefined"==typeof i||null===i||i.constructor!==Array)return this;this.shouldBlock.filenames=[];for(var t in i)"undefined"!=typeof i[t]&&null!==i[t]&&i[t].constructor===String&&this.shouldBlock.filenames.push(i[t]);return this},clearRegularExpressions:function(){return this.initialized!==!0?this:(this.shouldBlock.regularExpressions=[],this)},setRegularExpressions:function(i){if(this.initialized!==!0)return this;if("undefined"==typeof i||null===i||i.constructor!==Array)return this;this.shouldBlock.regularExpressions=[];for(var t in i)"undefined"!=typeof i[t]&&null!==i[t]&&i[t].constructor===RegExp&&this.shouldBlock.regularExpressions.push(i[t]);return this},setTimer:function(i){return this.initialized!==!0?this:"undefined"==typeof i||null===i||i.constructor!==Number||Number.isInteger(i)!==!0?this:(this.timer=i,null!==this.interval&&(this.stopTimer(),this.timer>=0&&this.startTimer()),this)},stopTimer:function(){return this.initialized!==!0?this:null===this.interval?this:(clearInterval(this.interval),this.interval=null,this)},startTimer:function(i,t,n){if(this.initialized!==!0)return this;if(null!==this.interval)return this;if(("undefined"==typeof i||null!==i&&i.constructor!==Function)&&(i=null),("undefined"==typeof t||null!==t&&t.constructor!==Function)&&(t=null),"undefined"!=typeof n&&null!==n&&n.constructor===Number&&Number.isInteger(n)===!0&&this.setTimer(n),this.timer>=0){var s=this;this.interval=setInterval(function(){s.detect(i,t)},this.timer)}return this},detect:function(i,t){if(this.initialized!==!0)return this;if("undefined"==typeof i&&"undefined"==typeof t)return this;if("undefined"!=typeof i&&null===i&&"undefined"!=typeof t&&null===t)return this;if("undefined"!=typeof i&&null!==i&&i.constructor!==Function&&"undefined"!=typeof t&&null!==t&&t.constructor!==Function)return this;var n=[],s=document.getElementsByTagName("script");for(var e in s){var r=s[e];if("undefined"!=typeof r.src&&null!==r.src&&r.src.constructor===String){var o=r.src;if(this.shouldBlock.localFiles!==!0||"file"!==o.split(":")[0]){var l=o.split("://"),u=2===l.length?l.shift():"";if(l=l[0].split("/"),"chrome-extension"===u){if(this.shouldBlock.allChromeExtensions===!0){n.push({origin:"BLOCK_ALL_CHROME_EXTENSIONS",name:l.length>0?l[0]:"UNKNOWN",src:o});continue}if(l[0].length>0){var h=this.shouldBlock.chromeExtensionsIds.indexOf(l[0]);if(h>-1){n.push({origin:"BLOCK_CHROME_EXTENSION_IDS",name:this.shouldBlock.chromeExtensionsIds[h],src:o});continue}}}if(u.length>0){var c=l[0].split(":")[0];if(c.length>0){var d=this.shouldBlock.domains.indexOf(c);if(d>-1){n.push({origin:"BLOCK_DOMAIN",name:this.shouldBlock.domains[d],src:o});continue}}}var a=l[l.length-1];if(a.length>0){var f=this.shouldBlock.filenames.indexOf(a);if(f>-1){n.push({origin:"BLOCK_FILENAME",name:this.shouldBlock.filenames[f],src:o});continue}}for(var e in this.shouldBlock.regularExpressions)if(this.shouldBlock.regularExpressions[e].test(o)===!0){n.push({origin:"BLOCK_REGULAR_EXPRESSION",name:this.shouldBlock.regularExpressions[e].toString(),src:o});break}}else n.push({origin:"BLOCK_LOCAL_FILES",src:o})}}return n.length>0?null!==i&&i.constructor===Function&&i(n):null!==t&&t.constructor===Function&&t(),this}},ScriptDetector.initialize();
